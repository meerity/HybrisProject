<?xml version="1.0" encoding="ISO-8859-1"?>

<items 	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
			xsi:noNamespaceSchemaLocation="items.xsd">
	
	<!--Third task-->
	<collectiontypes>
		<collectiontype code="FavouriteProductsList" elementtype="Product" type="list"/>
	</collectiontypes>

	<!--Forth task-->
	<enumtypes>
		<enumtype code="UserStatuses">
			<value code="ACTIVE"/>
			<value code="DISABLED"/>
			<value code="DELETED"/>
		</enumtype>
	</enumtypes>

	<relations>
		<!--First task -->
		<relation code="RecipeToIngredient" localized="false">
			<deployment table="Recipe_Ingredient" typecode="11002"/>
			<sourceElement type="Recipe" qualifier="recipes" collectiontype="set" cardinality="many"/>
			<targetElement type="Ingredient" qualifier="ingredients" cardinality="many"/>
		</relation>

		<!--Third task-->
		<relation code="UserFavouriteProducts" localized="false">
			<deployment table="User_ProductFav" typecode="11004"/>
			<sourceElement type="User" qualifier="user" cardinality="many" collectiontype="set"/>
			<targetElement type="Product" qualifier="product" cardinality="many"/>
		</relation>
		
	</relations>

	<itemtypes>
		<!--First task -->
		<itemtype code="Recipe" extends="GenericItem">
			<deployment table="Recipes" typecode="11000"/>
			<attributes>
				<attribute qualifier="instructions" type="java.lang.String">
					<persistence type="property"/>
				</attribute>
			</attributes>
		</itemtype>
		
		<itemtype code="Ingredient" extends="GenericItem">
			<deployment table="Ingredients" typecode="11001"/>
			<attributes>
				<attribute qualifier="quantity" type="java.lang.Integer">
					<persistence type="property"/>
				</attribute>
			</attributes>
		</itemtype>

		<!--Second task -->
		<itemtype code="LoyaltyCard">
			<deployment table="LoyaltyCards" typecode="11003"/>
			<attributes>
				<attribute qualifier="cardNumber" type="java.lang.String">
					<persistence type="property"/>
				</attribute>
				<attribute qualifier="points" type="java.lang.Long">
					<persistence type="property"/>
				</attribute>
			</attributes>
		</itemtype>

		<itemtype code="User" autocreate="false">
			<deployment table="User" typecode="11005"/>
			<attributes>
				<!-- Second task -->
				<attribute qualifier="loyaltyCard" type="LoyaltyCard">
					<persistence type="property"/>
				</attribute>

				<!--Third task -->
				<attribute qualifier="favProducts" type="FavouriteProductsList">
					<persistence type="property"/>
				</attribute>
			</attributes>
		</itemtype>

		<!--Forth task-->
		<itemtype code="SpecificUser" extends="User">
			<attributes>
				<attribute qualifier="status" type="UserStatuses">
					<modifiers optional="false"/>
					<persistence type="property"/>
					<defaultvalue>em().getEnumerationValue("userStatuses", "ACTIVE")</defaultvalue>
				</attribute>
			</attributes>
		</itemtype>

		<!--Fifth task-->
		<itemtype code="Engine" extends="GenericItem">
			<deployment table="Engines" typecode="11006"/>
			<attributes>
				<attribute qualifier="serialNumber" type="java.lang.String">
					<persistence type="property"/>
				</attribute>
			</attributes>
		</itemtype>

		<!--Fifth task-->
		<itemtype code="Car" extends="GenericItem">
			<deployment table="Cars" typecode="11007"/>
			<attributes>
				<attribute qualifier="engine" type="Engine">
					<persistence type="property"/>
					<modifiers partof="true"/>
				</attribute>
				<attribute qualifier="model" type="java.lang.String">
					<persistence type="property"/>
				</attribute>
			</attributes>
		</itemtype>
		
		<!--Sixth task-->
		<itemtype code="Rating" extends="GenericItem">
			<deployment table="Ratings" typecode="11008"/>
			<attributes>
				<attribute qualifier="score" type="java.lang.Integer">
					<persistence type="property"/>
				</attribute>
				<attribute qualifier="user" type="User">
					<persistence type="property"/>
				</attribute>
				<attribute qualifier="product" type="Product">
					<persistence type="property"/>
				</attribute>
			</attributes>
		</itemtype>
	</itemtypes>
</items>
